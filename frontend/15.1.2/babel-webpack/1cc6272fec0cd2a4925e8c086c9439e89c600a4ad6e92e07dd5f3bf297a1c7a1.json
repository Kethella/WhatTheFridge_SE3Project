{"ast":null,"code":"import _asyncToGenerator from \"C:/Users/IdeaPad 100-15IBD/Desktop/HdM/3-Semester/SE3/se3project/Angular/se3-recipe-generator-frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { EventEmitter } from '@angular/core';\nimport { Validators } from '@angular/forms';\nimport { MAT_DIALOG_DATA } from '@angular/material/dialog';\nimport { MatTable } from '@angular/material/table';\nimport { COMMA, ENTER } from '@angular/cdk/keycodes';\nimport { HttpEventType, HttpParams, HttpResponse } from '@angular/common/http';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/material/dialog\";\nimport * as i2 from \"@angular/forms\";\nimport * as i3 from \"src/app/services/recipe.service\";\nimport * as i4 from \"src/app/services/media.service\";\nimport * as i5 from \"@angular/common/http\";\nimport * as i6 from \"@angular/common\";\nimport * as i7 from \"@angular/material/core\";\nimport * as i8 from \"@angular/material/button\";\nimport * as i9 from \"@angular/material/chips\";\nimport * as i10 from \"@angular/material/icon\";\nimport * as i11 from \"@angular/material/input\";\nimport * as i12 from \"@angular/material/form-field\";\nimport * as i13 from \"@angular/material/select\";\nimport * as i14 from \"@angular/material/table\";\nfunction CreateRecipeComponent_th_37_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"th\", 33);\n    i0.ɵɵtext(1, \"Ingredient\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction CreateRecipeComponent_td_38_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\", 34);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const element_r9 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", element_r9.ingredientName, \" \");\n  }\n}\nfunction CreateRecipeComponent_th_40_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"th\", 33);\n    i0.ɵɵtext(1, \"Amount\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction CreateRecipeComponent_td_41_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\", 34);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const element_r10 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", element_r10.ingredientAmount, \" \");\n  }\n}\nfunction CreateRecipeComponent_tr_42_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"tr\", 35);\n  }\n}\nfunction CreateRecipeComponent_tr_43_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"tr\", 36);\n  }\n}\nfunction CreateRecipeComponent_mat_option_53_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-option\", 37);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const category_r12 = ctx.$implicit;\n    i0.ɵɵproperty(\"value\", category_r12.text);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", category_r12.text, \" \");\n  }\n}\nfunction CreateRecipeComponent_mat_chip_row_60_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r15 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"mat-chip-row\", 38);\n    i0.ɵɵlistener(\"removed\", function CreateRecipeComponent_mat_chip_row_60_Template_mat_chip_row_removed_0_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r15);\n      const tag_r13 = restoredCtx.$implicit;\n      const ctx_r14 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r14.removeTag(tag_r13));\n    });\n    i0.ɵɵtext(1);\n    i0.ɵɵelementStart(2, \"button\", 39)(3, \"mat-icon\");\n    i0.ɵɵtext(4, \"cancel\");\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const tag_r13 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", tag_r13, \" \");\n    i0.ɵɵadvance(1);\n    i0.ɵɵattribute(\"aria-label\", \"remove \" + tag_r13);\n  }\n}\nexport class CreateRecipeComponent {\n  constructor(dialogRef, data, _formBuilder, _recipeService, _mediaService, http, dialog) {\n    this.dialogRef = dialogRef;\n    this.data = data;\n    this._formBuilder = _formBuilder;\n    this._recipeService = _recipeService;\n    this._mediaService = _mediaService;\n    this.http = http;\n    this.dialog = dialog;\n    this.selectedCategory = {\n      \"enumValue\": \"\",\n      \"text\": \"\"\n    };\n    this.displayedColumns = ['ingredientName', 'ingredientAmount'];\n    this.mediaString = \"\";\n    this.progress = {\n      percentage: 0\n    };\n    this.selectedFile = null;\n    this.fileIsSelected = false;\n    this.queryParams = new HttpParams();\n    this.newQueryEvent = new EventEmitter();\n    this.visible = true;\n    this.selectable = true;\n    this.removable = true;\n    this.addOnBlur = true;\n    this.separatorKeysCodes = [ENTER, COMMA];\n    this.ingredienNames = [];\n    this.ingredientAmounts = [];\n    this.ingredients = [], this.selectedTags = [];\n  }\n  ngOnInit() {\n    var _this = this;\n    return _asyncToGenerator(function* () {\n      _this.recipeForm = _this._formBuilder.group({\n        ingredientName: [null, Validators.required],\n        ingredientAmount: [null, Validators.required],\n        name: [null, Validators.required],\n        category: [null, Validators.required],\n        tags: [null, Validators.required],\n        instructions: [null, Validators.required]\n      });\n      _this.categories = yield _this._recipeService.getCategories();\n    })();\n  }\n  onCloseClick() {\n    this.dialogRef.close();\n  }\n  onCancel() {\n    this.dialogRef.close();\n  }\n  selectFile(event) {\n    this.fileIsSelected = true;\n    this.selectedFiles = event.target.files;\n  }\n  onSubmit() {\n    if (this.fileIsSelected) {\n      this.progress.percentage = 0;\n      this.currentFileUpload = this.selectedFiles.item(0);\n      this._mediaService.updateFile(this.recipe.image, this.currentFileUpload).subscribe(event => {\n        if (event.type === HttpEventType.UploadProgress) {\n          this.progress.percentage = Math.round(100 * event.loaded / event.total);\n        } else if (event instanceof HttpResponse) {\n          this.mediaString = JSON.stringify(event.body);\n          this.mediaString = this.mediaString.slice(1, this.mediaString.length - 1);\n          // a bit ugly but i cannot get the mediaString out of the subscribe :/\n          this.selectedCategory = this.setSelectedCategory(this.selectedCategory);\n          this.recipe = {\n            id: '',\n            name: this.recipeForm.get('name')?.value,\n            ingredientNames: this.ingredienNames,\n            ingredientMeasures: this.ingredientAmounts,\n            category: this.selectedCategory.enumValue,\n            tags: this.selectedTags,\n            instructions: this.recipeForm.get('instructions')?.value,\n            image: this.mediaString,\n            link: '',\n            ownerAccount: ''\n          };\n          this.createRecipe();\n        }\n        this.selectedFiles = undefined;\n      });\n    } else {\n      this.selectedCategory = this.setSelectedCategory(this.selectedCategory);\n      this.recipe = {\n        id: '',\n        name: this.recipeForm.get('name')?.value,\n        ingredientNames: this.ingredienNames,\n        ingredientMeasures: this.ingredientAmounts,\n        category: this.selectedCategory.enumValue,\n        tags: this.selectedTags,\n        instructions: this.recipeForm.get('instructions')?.value,\n        image: \"\",\n        link: '',\n        ownerAccount: ''\n      };\n      this.createRecipe();\n    }\n  }\n  createRecipe() {\n    var _this2 = this;\n    return _asyncToGenerator(function* () {\n      _this2.recipe = yield _this2._recipeService.createRecipe(_this2.recipe);\n      _this2.dialogRef.close();\n    })();\n  }\n  onAddIngredient() {\n    var _this3 = this;\n    return _asyncToGenerator(function* () {\n      var name = _this3.recipeForm.get(\"ingredientName\")?.value;\n      var amount = _this3.recipeForm.get(\"ingredientAmount\")?.value;\n      _this3.ingredienNames.push(name);\n      _this3.ingredientAmounts.push(amount);\n      const ingredient = {\n        ingredientName: name,\n        ingredientAmount: amount\n      };\n      _this3.ingredients.push(ingredient);\n      _this3.table.renderRows();\n    })();\n  }\n  setSelectedCategory(selectedCategory) {\n    for (let category of this.categories) {\n      if (selectedCategory.text == category.text) {\n        selectedCategory.enumValue = category.enumValue;\n      }\n    }\n    return selectedCategory;\n  }\n  addTag(event) {\n    const value = (event.value || '').trim();\n    if (value) {\n      this.selectedTags.push(value);\n    }\n    event.chipInput.clear();\n  }\n  removeTag(tag) {\n    const index = this.selectedTags.indexOf(tag);\n    if (index >= 0) {\n      this.selectedTags.splice(index, 1);\n    }\n  }\n  openDialog() {\n    const dialogRef = this.dialog.open(DialogChangeImage, {\n      /*data: {\r\n        name: this.name,\r\n        animal: this.animal\r\n      },*/\n    });\n    dialogRef.afterClosed().subscribe(result => {\n      console.log('The dialog was closed');\n      this.recipe.image = result.image;\n    });\n  }\n}\nCreateRecipeComponent.ɵfac = function CreateRecipeComponent_Factory(t) {\n  return new (t || CreateRecipeComponent)(i0.ɵɵdirectiveInject(i1.MatDialogRef), i0.ɵɵdirectiveInject(MAT_DIALOG_DATA), i0.ɵɵdirectiveInject(i2.FormBuilder), i0.ɵɵdirectiveInject(i3.RecipeService), i0.ɵɵdirectiveInject(i4.MediaService), i0.ɵɵdirectiveInject(i5.HttpClient), i0.ɵɵdirectiveInject(i1.MatDialog));\n};\nCreateRecipeComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: CreateRecipeComponent,\n  selectors: [[\"app-create-recipe\"]],\n  viewQuery: function CreateRecipeComponent_Query(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵviewQuery(MatTable, 5);\n    }\n    if (rf & 2) {\n      let _t;\n      i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.table = _t.first);\n    }\n  },\n  outputs: {\n    newQueryEvent: \"newQueryEvent\"\n  },\n  decls: 74,\n  vars: 10,\n  consts: [[\"id\", \"dialog-header\"], [\"mat-dialog-title\", \"\", \"id\", \"recipeName\"], [\"id\", \"actions\"], [\"mat-mini-fab\", \"\", \"mat-dialog-close\", \"\", \"id\", \"close-button\", 3, \"click\"], [\"id\", \"recipe\"], [3, \"formGroup\"], [1, \"recipeField\"], [\"matInput\", \"\", \"formControlName\", \"name\", \"required\", \"\"], [\"type\", \"file\", \"id\", \"customFile\", 3, \"change\"], [\"id\", \"addIngredient\"], [\"matInput\", \"\", \"formControlName\", \"ingredientName\", \"required\", \"\"], [\"matInput\", \"\", \"formControlName\", \"ingredientAmount\", \"required\", \"\"], [\"mat-raised-button\", \"\", 1, \"addButton\", 3, \"click\"], [\"mat-table\", \"\", \"id\", \"table\", 1, \"mat-elevation-z8\", 3, \"dataSource\"], [\"matColumnDef\", \"ingredientName\"], [\"mat-header-cell\", \"\", 4, \"matHeaderCellDef\"], [\"mat-cell\", \"\", 4, \"matCellDef\"], [\"matColumnDef\", \"ingredientAmount\"], [\"mat-header-row\", \"\", 4, \"matHeaderRowDef\"], [\"mat-row\", \"\", 4, \"matRowDef\", \"matRowDefColumns\"], [\"id\", \"categoryTitle\"], [\"appearance\", \"fill\"], [\"formControlName\", \"category\", 3, \"value\", \"valueChange\"], [3, \"value\", 4, \"ngFor\", \"ngForOf\"], [1, \"example-chip-list\"], [\"chipGrid\", \"\"], [3, \"removed\", 4, \"ngFor\", \"ngForOf\"], [\"placeholder\", \"Add tag\", \"formControlName\", \"tags\", 3, \"matChipInputFor\", \"matChipInputSeparatorKeyCodes\", \"matChipInputAddOnBlur\", \"matChipInputTokenEnd\"], [\"appearance\", \"fill\", 1, \"instructions\"], [\"matInput\", \"\", \"formControlName\", \"instructions\"], [\"id\", \"action-buttons\"], [\"mat-raised-button\", \"\", 3, \"click\"], [\"mat\", \"\", \"mat-raised-button\", \"\", \"id\", \"create-btn\", 3, \"click\"], [\"mat-header-cell\", \"\"], [\"mat-cell\", \"\"], [\"mat-header-row\", \"\"], [\"mat-row\", \"\"], [3, \"value\"], [3, \"removed\"], [\"matChipRemove\", \"\"]],\n  template: function CreateRecipeComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0)(1, \"h3\", 1);\n      i0.ɵɵtext(2, \"Create Custom Recipe\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(3, \"mat-dialog-actions\", 2)(4, \"button\", 3);\n      i0.ɵɵlistener(\"click\", function CreateRecipeComponent_Template_button_click_4_listener() {\n        return ctx.onCloseClick();\n      });\n      i0.ɵɵelementStart(5, \"mat-icon\");\n      i0.ɵɵtext(6, \"close\");\n      i0.ɵɵelementEnd()()()();\n      i0.ɵɵelementStart(7, \"mat-dialog-content\")(8, \"div\", 4)(9, \"form\", 5)(10, \"div\", 6)(11, \"h3\");\n      i0.ɵɵtext(12, \"Name your recipe\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(13, \"mat-form-field\")(14, \"mat-label\");\n      i0.ɵɵtext(15, \"Name\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(16, \"input\", 7);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(17, \"div\", 6)(18, \"h2\");\n      i0.ɵɵtext(19, \"Select Image\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(20, \"input\", 8);\n      i0.ɵɵlistener(\"change\", function CreateRecipeComponent_Template_input_change_20_listener($event) {\n        return ctx.selectFile($event);\n      });\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(21, \"div\", 6)(22, \"div\", 9)(23, \"h3\");\n      i0.ɵɵtext(24, \"Add Ingredients\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(25, \"mat-form-field\")(26, \"mat-label\");\n      i0.ɵɵtext(27, \"Ingredient\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(28, \"input\", 10);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(29, \"mat-form-field\")(30, \"mat-label\");\n      i0.ɵɵtext(31, \"Amount\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(32, \"input\", 11);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(33, \"button\", 12);\n      i0.ɵɵlistener(\"click\", function CreateRecipeComponent_Template_button_click_33_listener() {\n        return ctx.onAddIngredient();\n      });\n      i0.ɵɵtext(34, \"Add\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(35, \"table\", 13);\n      i0.ɵɵelementContainerStart(36, 14);\n      i0.ɵɵtemplate(37, CreateRecipeComponent_th_37_Template, 2, 0, \"th\", 15);\n      i0.ɵɵtemplate(38, CreateRecipeComponent_td_38_Template, 2, 1, \"td\", 16);\n      i0.ɵɵelementContainerEnd();\n      i0.ɵɵelementContainerStart(39, 17);\n      i0.ɵɵtemplate(40, CreateRecipeComponent_th_40_Template, 2, 0, \"th\", 15);\n      i0.ɵɵtemplate(41, CreateRecipeComponent_td_41_Template, 2, 1, \"td\", 16);\n      i0.ɵɵelementContainerEnd();\n      i0.ɵɵtemplate(42, CreateRecipeComponent_tr_42_Template, 1, 0, \"tr\", 18);\n      i0.ɵɵtemplate(43, CreateRecipeComponent_tr_43_Template, 1, 0, \"tr\", 19);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(44, \"div\", 6)(45, \"h3\", 20);\n      i0.ɵɵtext(46, \"Category\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(47, \"mat-form-field\", 21)(48, \"mat-label\");\n      i0.ɵɵtext(49, \"Category\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(50, \"mat-select\", 22);\n      i0.ɵɵlistener(\"valueChange\", function CreateRecipeComponent_Template_mat_select_valueChange_50_listener($event) {\n        return ctx.selectedCategory.text = $event;\n      });\n      i0.ɵɵelementStart(51, \"mat-option\");\n      i0.ɵɵtext(52, \"All\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(53, CreateRecipeComponent_mat_option_53_Template, 2, 2, \"mat-option\", 23);\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(54, \"div\", 6)(55, \"h3\");\n      i0.ɵɵtext(56, \"Tags\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(57, \"mat-form-field\", 24)(58, \"mat-chip-grid\", null, 25);\n      i0.ɵɵtemplate(60, CreateRecipeComponent_mat_chip_row_60_Template, 5, 2, \"mat-chip-row\", 26);\n      i0.ɵɵelementStart(61, \"input\", 27);\n      i0.ɵɵlistener(\"matChipInputTokenEnd\", function CreateRecipeComponent_Template_input_matChipInputTokenEnd_61_listener($event) {\n        return ctx.addTag($event);\n      });\n      i0.ɵɵelementEnd()()()();\n      i0.ɵɵelementStart(62, \"div\", 6)(63, \"h3\");\n      i0.ɵɵtext(64, \"Instructions\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(65, \"mat-form-field\", 28)(66, \"mat-label\");\n      i0.ɵɵtext(67, \"Instructions\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(68, \"textarea\", 29);\n      i0.ɵɵelementEnd()()()();\n      i0.ɵɵelementStart(69, \"div\", 30)(70, \"button\", 31);\n      i0.ɵɵlistener(\"click\", function CreateRecipeComponent_Template_button_click_70_listener() {\n        return ctx.onCancel();\n      });\n      i0.ɵɵtext(71, \"Cancel\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(72, \"button\", 32);\n      i0.ɵɵlistener(\"click\", function CreateRecipeComponent_Template_button_click_72_listener() {\n        return ctx.onSubmit();\n      });\n      i0.ɵɵtext(73, \"Create\");\n      i0.ɵɵelementEnd()()();\n    }\n    if (rf & 2) {\n      const _r7 = i0.ɵɵreference(59);\n      i0.ɵɵadvance(9);\n      i0.ɵɵproperty(\"formGroup\", ctx.recipeForm);\n      i0.ɵɵadvance(26);\n      i0.ɵɵproperty(\"dataSource\", ctx.ingredients);\n      i0.ɵɵadvance(7);\n      i0.ɵɵproperty(\"matHeaderRowDef\", ctx.displayedColumns);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"matRowDefColumns\", ctx.displayedColumns);\n      i0.ɵɵadvance(7);\n      i0.ɵɵproperty(\"value\", ctx.selectedCategory.text);\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"ngForOf\", ctx.categories);\n      i0.ɵɵadvance(7);\n      i0.ɵɵproperty(\"ngForOf\", ctx.selectedTags);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"matChipInputFor\", _r7)(\"matChipInputSeparatorKeyCodes\", ctx.separatorKeysCodes)(\"matChipInputAddOnBlur\", ctx.addOnBlur);\n    }\n  },\n  dependencies: [i6.NgForOf, i2.ɵNgNoValidate, i2.DefaultValueAccessor, i2.NgControlStatus, i2.NgControlStatusGroup, i2.RequiredValidator, i7.MatOption, i8.MatButton, i8.MatMiniFabButton, i9.MatChipGrid, i9.MatChipInput, i9.MatChipRemove, i9.MatChipRow, i1.MatDialogClose, i1.MatDialogTitle, i1.MatDialogContent, i1.MatDialogActions, i10.MatIcon, i11.MatInput, i12.MatFormField, i12.MatLabel, i13.MatSelect, i14.MatTable, i14.MatHeaderCellDef, i14.MatHeaderRowDef, i14.MatColumnDef, i14.MatCellDef, i14.MatRowDef, i14.MatHeaderCell, i14.MatCell, i14.MatHeaderRow, i14.MatRow, i2.FormGroupDirective, i2.FormControlName],\n  styles: [\"#dialog-header[_ngcontent-%COMP%] {\\r\\n  display: flex;\\r\\n  flex-direction: row;\\r\\n  justify-content: space-between;\\r\\n}\\r\\n\\r\\n.recipeField[_ngcontent-%COMP%] {\\r\\n  padding-bottom: 30px;\\r\\n}\\r\\n\\r\\n#categoryTitle[_ngcontent-%COMP%] {\\r\\n  padding-top: 15px;\\r\\n}\\r\\n\\r\\n#create-btn[_ngcontent-%COMP%] {\\r\\n  background-color: aquamarine;\\r\\n  color: black;\\r\\n}\\r\\n\\r\\n.example-chip-list[_ngcontent-%COMP%] {\\r\\n  width: 100%;\\r\\n}\\r\\n\\r\\n\\r\\n.instructions[_ngcontent-%COMP%]{\\r\\n  width: 100%;\\r\\n}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvbW9kdWxlcy9teS1yZWNpcGVzL2NyZWF0ZS1yZWNpcGUvY3JlYXRlLXJlY2lwZS5jb21wb25lbnQuY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0UsYUFBYTtFQUNiLG1CQUFtQjtFQUNuQiw4QkFBOEI7QUFDaEM7O0FBRUE7RUFDRSxvQkFBb0I7QUFDdEI7O0FBRUE7RUFDRSxpQkFBaUI7QUFDbkI7O0FBRUE7RUFDRSw0QkFBNEI7RUFDNUIsWUFBWTtBQUNkOztBQUVBO0VBQ0UsV0FBVztBQUNiOzs7QUFHQTtFQUNFLFdBQVc7QUFDYiIsInNvdXJjZXNDb250ZW50IjpbIiNkaWFsb2ctaGVhZGVyIHtcclxuICBkaXNwbGF5OiBmbGV4O1xyXG4gIGZsZXgtZGlyZWN0aW9uOiByb3c7XHJcbiAganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuO1xyXG59XHJcblxyXG4ucmVjaXBlRmllbGQge1xyXG4gIHBhZGRpbmctYm90dG9tOiAzMHB4O1xyXG59XHJcblxyXG4jY2F0ZWdvcnlUaXRsZSB7XHJcbiAgcGFkZGluZy10b3A6IDE1cHg7XHJcbn1cclxuXHJcbiNjcmVhdGUtYnRuIHtcclxuICBiYWNrZ3JvdW5kLWNvbG9yOiBhcXVhbWFyaW5lO1xyXG4gIGNvbG9yOiBibGFjaztcclxufVxyXG5cclxuLmV4YW1wbGUtY2hpcC1saXN0IHtcclxuICB3aWR0aDogMTAwJTtcclxufVxyXG5cclxuXHJcbi5pbnN0cnVjdGlvbnN7XHJcbiAgd2lkdGg6IDEwMCU7XHJcbn1cclxuXHJcblxyXG4iXSwic291cmNlUm9vdCI6IiJ9 */\"]\n});\nexport class DialogChangeImage {\n  constructor(dialogRef, data) {\n    this.dialogRef = dialogRef;\n    this.data = data;\n  }\n  onNoClick() {\n    this.dialogRef.close();\n  }\n}\nDialogChangeImage.ɵfac = function DialogChangeImage_Factory(t) {\n  return new (t || DialogChangeImage)(i0.ɵɵdirectiveInject(i1.MatDialogRef), i0.ɵɵdirectiveInject(MAT_DIALOG_DATA));\n};\nDialogChangeImage.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: DialogChangeImage,\n  selectors: [[\"dialog-change-image\"]],\n  decls: 2,\n  vars: 0,\n  template: function DialogChangeImage_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\");\n      i0.ɵɵtext(1, \"Hi\");\n      i0.ɵɵelementEnd();\n    }\n  },\n  encapsulation: 2\n});","map":{"version":3,"mappings":"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","names":["EventEmitter","Validators","MAT_DIALOG_DATA","MatTable","COMMA","ENTER","HttpEventType","HttpParams","HttpResponse","i0","CreateRecipeComponent","constructor","dialogRef","data","_formBuilder","_recipeService","_mediaService","http","dialog","percentage","ingredienNames","ingredientAmounts","ingredients","selectedTags","ngOnInit","recipeForm","group","ingredientName","required","ingredientAmount","name","category","tags","instructions","categories","getCategories","onCloseClick","close","onCancel","selectFile","event","fileIsSelected","selectedFiles","target","files","onSubmit","progress","currentFileUpload","item","updateFile","recipe","image","subscribe","type","UploadProgress","Math","round","loaded","total","mediaString","JSON","stringify","body","slice","length","selectedCategory","setSelectedCategory","id","get","value","ingredientNames","ingredientMeasures","enumValue","link","ownerAccount","createRecipe","undefined","onAddIngredient","amount","push","ingredient","table","renderRows","text","addTag","trim","chipInput","clear","removeTag","tag","index","indexOf","splice","openDialog","open","DialogChangeImage","afterClosed","result","console","log","selectors","viewQuery","ctx","onNoClick","decls","vars","template"],"sourceRoot":"","sources":["C:\\Users\\IdeaPad 100-15IBD\\Desktop\\HdM\\3-Semester\\SE3\\se3project\\Angular\\se3-recipe-generator-frontend\\src\\app\\modules\\my-recipes\\create-recipe\\create-recipe.component.ts","C:\\Users\\IdeaPad 100-15IBD\\Desktop\\HdM\\3-Semester\\SE3\\se3project\\Angular\\se3-recipe-generator-frontend\\src\\app\\modules\\my-recipes\\create-recipe\\create-recipe.component.html","C:\\Users\\IdeaPad 100-15IBD\\Desktop\\HdM\\3-Semester\\SE3\\se3project\\Angular\\se3-recipe-generator-frontend\\src\\app\\modules\\my-recipes\\create-recipe\\dialog-change-image.html"],"sourcesContent":["import { Component, EventEmitter, Inject, Output, ViewChild } from '@angular/core';\r\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\r\nimport { MatDialog, MatDialogRef, MAT_DIALOG_DATA } from '@angular/material/dialog';\r\nimport { Recipe } from 'src/app/models/recipe';\r\nimport { RecipeService } from 'src/app/services/recipe.service';\r\nimport { RecipeDetailsComponent } from 'src/app/shared/components/recipe-details/recipe-details.component';\r\nimport {MatTable} from '@angular/material/table';\r\nimport { ICategory } from 'src/app/models/category';\r\nimport { MatChipInputEvent } from '@angular/material/chips';\r\nimport { COMMA, ENTER } from '@angular/cdk/keycodes';\r\nimport { HttpClient, HttpEventType, HttpParams, HttpResponse } from '@angular/common/http';\r\nimport { MediaService } from 'src/app/services/media.service';\r\n\r\n\r\n@Component({\r\n  selector: 'app-create-recipe',\r\n  templateUrl: './create-recipe.component.html',\r\n  styleUrls: ['./create-recipe.component.css']\r\n})\r\nexport class CreateRecipeComponent {\r\n  recipeForm: FormGroup;\r\n\r\n  recipe: Recipe;\r\n\r\n  ingredienNames: string[];\r\n  ingredientAmounts: string[];\r\n  ingredients: Ingredient[];\r\n\r\n  selectedCategory: ICategory = {\"enumValue\": \"\", \"text\":\"\"};\r\n  categories: ICategory[];\r\n\r\n  selectedTags: string[];\r\n\r\n  displayedColumns: string[] = ['ingredientName', 'ingredientAmount'];\r\n\r\n  mediaString: string = \"\";\r\n\r\n  selectedFiles: FileList;\r\n  currentFileUpload: File;\r\n  progress: { percentage: number } = { percentage: 0 };\r\n  selectedFile = null;\r\n\r\n  fileIsSelected = false;\r\n\r\n  public queryParams = new HttpParams();\r\n  @Output() public newQueryEvent = new EventEmitter<HttpParams>();\r\n\r\n  @ViewChild(MatTable) table: MatTable<Ingredient>;\r\n\r\n  constructor(public dialogRef:MatDialogRef<CreateRecipeComponent>,\r\n    @Inject(MAT_DIALOG_DATA) public data:any,\r\n    private _formBuilder: FormBuilder,\r\n    private _recipeService:RecipeService,\r\n    private _mediaService: MediaService,\r\n    public http: HttpClient,\r\n    public dialog: MatDialog){\r\n\r\n      this.ingredienNames = []\r\n      this.ingredientAmounts = []\r\n      this.ingredients = [],\r\n      this.selectedTags =[]\r\n }\r\n\r\n  async ngOnInit(){\r\n    this.recipeForm=this._formBuilder.group({\r\n      ingredientName:[null, Validators.required],\r\n      ingredientAmount:[null, Validators.required],\r\n      name:[null, Validators.required],\r\n      category:[null, Validators.required],\r\n      tags:[null, Validators.required],\r\n      instructions:[null, Validators.required]\r\n    })\r\n\r\n    this.categories = await this._recipeService.getCategories();\r\n  }\r\n\r\n  onCloseClick() {\r\n    this.dialogRef.close();\r\n  }\r\n  onCancel(){\r\n    this.dialogRef.close();\r\n  }\r\n\r\n\r\n  selectFile(event) {\r\n    this.fileIsSelected = true;\r\n    this.selectedFiles = event.target.files;\r\n  }\r\n\r\n  onSubmit(){\r\n\r\n    if(this.fileIsSelected) {\r\n      this.progress.percentage = 0;\r\n      this.currentFileUpload = this.selectedFiles.item(0)!;\r\n      this._mediaService.updateFile(this.recipe.image, this.currentFileUpload).subscribe(event => {\r\n        if (event.type === HttpEventType.UploadProgress) {\r\n          this.progress.percentage = Math.round(100 * event.loaded / event.total!);\r\n        } else if (event instanceof HttpResponse) {\r\n            this.mediaString = JSON.stringify(event.body)\r\n            this.mediaString = this.mediaString.slice(1, this.mediaString.length - 1)\r\n\r\n            // a bit ugly but i cannot get the mediaString out of the subscribe :/\r\n            this.selectedCategory = this.setSelectedCategory(this.selectedCategory)\r\n            this.recipe={\r\n              id: '',\r\n              name:this.recipeForm.get('name')?.value,\r\n              ingredientNames: this.ingredienNames,\r\n              ingredientMeasures: this.ingredientAmounts,\r\n              category: this.selectedCategory.enumValue,\r\n              tags: this.selectedTags,\r\n              instructions:this.recipeForm.get('instructions')?.value,\r\n              image: this.mediaString,\r\n              link:'',\r\n              ownerAccount:''\r\n            }\r\n            this.createRecipe()\r\n        }\r\n        this.selectedFiles = undefined!;\r\n        }\r\n      );\r\n    } else{\r\n      this.selectedCategory = this.setSelectedCategory(this.selectedCategory)\r\n        this.recipe={\r\n          id: '',\r\n          name:this.recipeForm.get('name')?.value,\r\n          ingredientNames: this.ingredienNames,\r\n          ingredientMeasures: this.ingredientAmounts,\r\n          category: this.selectedCategory.enumValue,\r\n          tags: this.selectedTags,\r\n          instructions:this.recipeForm.get('instructions')?.value,\r\n          image: \"\",\r\n          link:'',\r\n          ownerAccount:''\r\n        }\r\n        this.createRecipe()\r\n    }\r\n\r\n }\r\n\r\n\r\n async createRecipe() {\r\n  this.recipe = await this._recipeService.createRecipe(this.recipe);\r\n    this.dialogRef.close();\r\n }\r\n\r\n\r\n  async onAddIngredient(){\r\n    var name = this.recipeForm.get(\"ingredientName\")?.value\r\n    var amount = this.recipeForm.get(\"ingredientAmount\")?.value\r\n\r\n    this.ingredienNames.push(name)\r\n    this.ingredientAmounts.push(amount)\r\n\r\n    const ingredient: Ingredient = {\r\n      ingredientName: name,\r\n      ingredientAmount: amount\r\n    }\r\n\r\n    this.ingredients.push(ingredient)\r\n    this.table.renderRows();\r\n  }\r\n\r\n  setSelectedCategory(selectedCategory: ICategory): ICategory{\r\n\r\n    for (let category of this.categories){\r\n      if (selectedCategory.text == category.text){\r\n        selectedCategory.enumValue = category.enumValue;\r\n      }\r\n    }\r\n    return selectedCategory;\r\n  }\r\n\r\n  visible = true;\r\n  selectable = true;\r\n  removable = true;\r\n  addOnBlur = true;\r\n  readonly separatorKeysCodes: number[] = [ENTER, COMMA];\r\n\r\n  addTag(event: MatChipInputEvent): void {\r\n    const value = (event.value || '').trim();\r\n\r\n    if (value) {\r\n      this.selectedTags.push(value);\r\n    }\r\n\r\n    event.chipInput!.clear();\r\n  }\r\n\r\n  removeTag(tag: string): void {\r\n    const index = this.selectedTags.indexOf(tag);\r\n\r\n    if (index >= 0) {\r\n      this.selectedTags.splice(index, 1);\r\n    }\r\n  }\r\n\r\n  openDialog(): void {\r\n    const dialogRef = this.dialog.open(DialogChangeImage, {\r\n      /*data: {\r\n        name: this.name,\r\n        animal: this.animal\r\n      },*/\r\n    });\r\n\r\n    dialogRef.afterClosed().subscribe(result => {\r\n      console.log('The dialog was closed');\r\n      this.recipe.image = result.image;\r\n    });\r\n  }\r\n\r\n}\r\n\r\nexport interface Ingredient {\r\n  ingredientName: string;\r\n  ingredientAmount: number;\r\n}\r\n\r\n\r\n@Component({\r\n  selector: 'dialog-change-image',\r\n  templateUrl: 'dialog-change-image.html',\r\n})\r\nexport class DialogChangeImage{\r\n  constructor(\r\n    public dialogRef: MatDialogRef<DialogChangeImage>,\r\n    @Inject(MAT_DIALOG_DATA) public data: DialogData,\r\n  ) {}\r\n\r\n  onNoClick(): void {\r\n    this.dialogRef.close();\r\n  }\r\n}\r\n\r\nexport interface DialogData {\r\n  image: string;\r\n}\r\n","<div id=\"dialog-header\">\r\n    <h3 mat-dialog-title id=\"recipeName\">Create Custom Recipe</h3>\r\n\r\n    <mat-dialog-actions id=\"actions\">\r\n      <button mat-mini-fab mat-dialog-close id=\"close-button\" (click)=\"onCloseClick()\">\r\n        <mat-icon>close</mat-icon>\r\n      </button>\r\n    </mat-dialog-actions>\r\n</div>\r\n\r\n<mat-dialog-content>\r\n\r\n  <div id=\"recipe\">\r\n\r\n    <form [formGroup]=\"recipeForm\">\r\n\r\n      <div class=\"recipeField\">\r\n        <h3>Name your recipe</h3>\r\n      <mat-form-field>\r\n        <mat-label>Name</mat-label>\r\n        <input matInput formControlName=\"name\" required>\r\n      </mat-form-field>\r\n      </div>\r\n\r\n      <div class=\"recipeField\">\r\n        <h2>Select Image</h2>\r\n        <input type=\"file\" id=\"customFile\" (change)=\"selectFile($event)\">\r\n      </div>\r\n\r\n      <div class=\"recipeField\">\r\n        <div id=\"addIngredient\">\r\n\r\n          <h3>Add Ingredients</h3>\r\n\r\n          <mat-form-field>\r\n            <mat-label>Ingredient</mat-label>\r\n            <input matInput formControlName=\"ingredientName\" required>\r\n          </mat-form-field>\r\n\r\n          <mat-form-field>\r\n            <mat-label>Amount</mat-label>\r\n            <input matInput formControlName=\"ingredientAmount\" required>\r\n          </mat-form-field>\r\n\r\n          <button mat-raised-button (click)=\"onAddIngredient()\" class=\"addButton\">Add</button>\r\n\r\n        </div>\r\n\r\n        <table mat-table [dataSource]=\"ingredients\" class=\"mat-elevation-z8\" id=\"table\" >\r\n\r\n          <!-- Name Column -->\r\n          <ng-container matColumnDef=\"ingredientName\">\r\n            <th mat-header-cell *matHeaderCellDef>Ingredient</th>\r\n            <td mat-cell *matCellDef=\"let element\"> {{element.ingredientName}} </td>\r\n          </ng-container>\r\n\r\n          <!-- Position Column -->\r\n          <ng-container matColumnDef=\"ingredientAmount\">\r\n            <th mat-header-cell *matHeaderCellDef>Amount</th>\r\n            <td mat-cell *matCellDef=\"let element\"> {{element.ingredientAmount}} </td>\r\n          </ng-container>\r\n\r\n          <tr mat-header-row *matHeaderRowDef=\"displayedColumns\"></tr>\r\n          <tr mat-row *matRowDef=\"let row; columns: displayedColumns;\"></tr>\r\n\r\n        </table>\r\n      </div>\r\n\r\n\r\n      <div class=\"recipeField\">\r\n        <h3 id=\"categoryTitle\">Category</h3>\r\n        <mat-form-field appearance=\"fill\">\r\n          <mat-label>Category</mat-label>\r\n          <mat-select formControlName=\"category\" [(value)]=\"selectedCategory.text\">\r\n            <mat-option>All</mat-option>\r\n            <mat-option *ngFor=\"let category of categories\" [value]=\"category.text\">\r\n              {{category.text}}\r\n            </mat-option>\r\n          </mat-select>\r\n        </mat-form-field>\r\n      </div>\r\n\r\n\r\n      <div class=\"recipeField\">\r\n        <h3>Tags</h3>\r\n      <mat-form-field class=\"example-chip-list\">\r\n        <mat-chip-grid #chipGrid>\r\n          <mat-chip-row *ngFor=\"let tag of selectedTags\" (removed)=\"removeTag(tag)\">\r\n            {{tag}}\r\n            <button matChipRemove [attr.aria-label]=\"'remove ' + tag\">\r\n              <mat-icon>cancel</mat-icon>\r\n            </button>\r\n          </mat-chip-row>\r\n          <input placeholder=\"Add tag\"\r\n                [matChipInputFor]=\"chipGrid\"\r\n                [matChipInputSeparatorKeyCodes]=\"separatorKeysCodes\"\r\n                [matChipInputAddOnBlur]=\"addOnBlur\"\r\n                (matChipInputTokenEnd)=\"addTag($event)\"\r\n                formControlName=\"tags\"/>\r\n        </mat-chip-grid>\r\n      </mat-form-field>\r\n      </div>\r\n\r\n\r\n      <div class=\"recipeField\">\r\n        <h3>Instructions</h3>\r\n      <mat-form-field appearance=\"fill\" class=\"instructions\">\r\n        <mat-label>Instructions</mat-label>\r\n        <textarea matInput formControlName=\"instructions\"></textarea>\r\n      </mat-form-field>\r\n      </div>\r\n\r\n    </form>\r\n  </div>\r\n\r\n\r\n  <div id=\"action-buttons\">\r\n    <button mat-raised-button (click)=\"onCancel()\">Cancel</button>\r\n    <button mat mat-raised-button id=\"create-btn\" (click)=\"onSubmit()\">Create</button>\r\n  </div>\r\n\r\n\r\n\r\n</mat-dialog-content>\r\n\r\n\r\n","<div>Hi</div>\r\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}